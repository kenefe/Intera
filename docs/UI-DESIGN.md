# Intera — 界面设计

## 设计语言

- **暗色主题**，高对比度，线性品牌感
- 无圆角 icon，干净锐利
- 最少 chrome，最大画布空间
- 交互反馈用弹簧动效（自己的工具自己用）

---

## 整体布局

```
┌──────────────────────────────────────────────────────────────────────┐
│  Toolbar                                                             │
│  [V] [F] [R] [O] [T]  ···  Intera  ···  100%  ···  [▶ Preview]     │
├───────────┬──────────────────────────────────────┬───────────────────┤
│           │                                      │                   │
│  Left     │              Canvas                  │  Right            │
│  Panel    │                                      │  Panel            │
│           │                                      │                   │
│  260px    │           flex: 1                     │  280px            │
│           │                                      │                   │
│           │                                      │                   │
│           │                                      │                   │
├───────────┴──────────────────────────────────┬───┴───────────────────┤
│  Patch Editor (节点画布)            flex: 1  │ Var Panel  160px/28px │
│  [Touch] [If] [Toggle] ...                   │ (可折叠)              │
│                                     250px    │                       │
└──────────────────────────────────────────────┴───────────────────────┘
```

五个区域：**工具栏** + **左面板** + **画布** + **右面板** + **底部 Patch 行** (节点画布 + 变量面板)。

---

## 1. 工具栏 (Toolbar)

顶部一行，高度 40px。

```
┌──────────────────────────────────────────────────────────────────────┐
│ [V] [F] [R] [O] [T] [I] │  Intera  │  [−] 100% [+]  │  [▶ Preview]│
│  绘制工具                   品牌       缩放控制          预览按钮     │
└──────────────────────────────────────────────────────────────────────┘
```

### 工具

| 快捷键 | 工具 | 说明 |
|--------|------|------|
| V | 选择 (Select) | 选中/移动/缩放图层 |
| F | 容器 (Frame) | 绘制容器 (类似 Figma 的 Frame) |
| R | 矩形 (Rectangle) | 绘制矩形 |
| O | 椭圆 (Ellipse) | 绘制椭圆 |
| T | 文本 (Text) | 创建/编辑文本 |
| I | 图片 (Image) | 插入图片 |
| Space+拖拽 | 平移画布 | |
| Cmd+滚轮 | 缩放画布 | |

### 预览按钮

- 右侧最突出的按钮，蓝色/紫色
- 点击进入**预览模式**（所有面板淡出，画布变为可交互）
- Escape 退出预览

---

## 2. 左面板 (Left Panel)

宽度 230px，可拖拽调整，分上下两个区段：

```
┌─ Left Panel ──────────┐
│                        │
│  ┌─ Layers ──────────┐ │
│  │ ▶ Frame "Card"    │ │
│  │   ● Rect "bg"     │ │
│  │   ● Text "title"  │ │
│  │   ● Rect "thumb"  │ │
│  │ ▶ Frame "TabBar"  │ │
│  │   ● Rect "tab1"   │ │
│  │   ● Rect "tab2"   │ │
│  └───────────────────┘ │
│                        │
│  ┌─ State Groups ────┐ │
│  │                    │ │
│  │ ▼ 主画面            │ │
│  │   ◉ 默认       [编辑]│ │
│  │   ○ 展开            │ │
│  │   ○ 加载中          │ │
│  │   [+ 添加状态]      │ │
│  │                    │ │
│  │ ▼ Card             │ │
│  │   ◉ 收起            │ │
│  │   ○ 展开            │ │
│  │   [+ 添加状态]      │ │
│  │                    │ │
│  │ [+ 新建状态组]      │ │
│  └───────────────────┘ │
│                        │
└────────────────────────┘
```

### Layers (图层树) — 上半部分

- **Figma 风格**的图层树，支持折叠/展开
- **所有状态共享这棵树** — 不会因为切换状态而改变图层列表
- 操作：拖拽重排、重命名 (双击)、锁定 (🔒)、隐藏 (👁)
- 选中图层高亮，多选支持 (Shift+点击, Cmd+点击)
- 图层名字旁，如果该图层在当前状态有属性覆盖，显示小 ◆ 标记

### State Groups (状态组) — 下半部分

- 按状态组分类列出所有显示状态
- **主画面**是第一个默认组（rootLayerId = null）
- 每个组件可以有自己的状态组
- ◉ 当前编辑中的状态，○ 其他状态
- 点击切换编辑状态 → 画布高亮对应的 artboard
- [+ 添加状态] — 复制当前状态为新状态
- [+ 新建状态组] — 指定一个 Frame 图层为状态组根

---

## 3. 画布 (Canvas)

中间主区域，无限画布，支持缩放和平移。

### 多状态画板网格

这是 Intera 最独特的界面——**所有状态同时可见**：

```
Canvas
┌────────────────────────────────────────────────────────────────┐
│                                                                │
│  主画面                                                        │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                 │
│  │ ┌──────┐ │    │ ┌──────┐ │    │ ┌──────┐ │                 │
│  │ │      │ │    │ │      │ │    │ │      │ │    ┌────┐       │
│  │ │ 默认  │ │    │ │ 展开  │ │    │ │ 加载  │ │    │ +  │       │
│  │ │      │ │    │ │      │ │    │ │      │ │    └────┘       │
│  │ └──────┘ │    │ └──────┘ │    │ └──────┘ │                 │
│  │  "默认"  │    │  "展开"  │    │  "加载中" │                 │
│  └──────────┘    └──────────┘    └──────────┘                 │
│    ▲ 蓝色边框                                                  │
│    当前编辑中                                                  │
│                                                                │
│  Card ─────────────────────────────────────                    │
│  ┌──────────┐    ┌──────────┐                                  │
│  │ ┌──────┐ │    │ ┌──────┐ │                                  │
│  │ │ 收起  │ │    │ │ 展开  │ │    ┌────┐                       │
│  │ └──────┘ │    │ │      │ │    │ +  │                       │
│  │  "收起"  │    │ └──────┘ │    └────┘                       │
│  └──────────┘    │  "展开"  │                                  │
│                  └──────────┘                                  │
│                                                                │
│  TabBar ───────────────────────────────────                    │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐                 │
│  │ [■ □ □]  │    │ [□ ■ □]  │    │ [□ □ ■]  │    ┌────┐       │
│  │  "Tab1"  │    │  "Tab2"  │    │  "Tab3"  │    │ +  │       │
│  └──────────┘    └──────────┘    └──────────┘    └────┘       │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

### 画板规则

- **每行 = 一个 StateGroup**，行标题在左侧
- **每列 = 一个 DisplayState**，从左到右排列
- 所有画板**完整渲染**，不用灰色占位或简化
- **当前编辑状态**的画板蓝色边框高亮
- 状态名显示在画板下方
- 行末的 [+] 按钮添加新状态
- 画板间距: 水平 80px, 垂直 120px (行间)
- 行标题文字 12px, 灰色, 在画板左侧

### 画板内编辑

- 在任何画板内直接编辑图层
- 选中图层 → 显示选框 + 8个控制点 (缩放) + 旋转手柄
- 拖拽移动图层 → **只影响当前状态的属性覆盖**
- 在默认状态修改 → 同步到所有状态（除非某状态已有覆盖）
- 在非默认状态修改 → 自动创建该属性的覆盖 → 标记为关键属性

### 画布交互

| 操作 | 行为 |
|------|------|
| 点击画板 | 切换到该状态进行编辑 |
| 点击画板内图层 | 选中图层 |
| Space+拖拽 | 平移画布 |
| Cmd+滚轮 / 双指缩放 | 缩放画布 |
| Cmd+0 | 缩放到适合全部内容 |
| Cmd+1 | 缩放到 100% |
| 绘制工具+画板内拖拽 | 在该状态的画板内创建图层 |
| Delete / Backspace | 删除选中图层 |
| Cmd+C/V | 复制粘贴 |
| 方向键 | 微调位置 (1px) |
| Shift+方向键 | 微调位置 (10px) |

---

## 4. 右面板 (Right Panel)

宽度 280px，根据选中内容动态切换。

### 4a. 无选中 — 画板信息

```
┌─ Right Panel ─────────┐
│                        │
│  画布尺寸               │
│  ┌────┐  ┌────┐       │
│  │ W  │  │ H  │       │
│  │ 393│  │ 852│       │
│  └────┘  └────┘       │
│                        │
│  预设: [iPhone 14 Pro ▼]│
│                        │
│  背景色: [■ #1a1a1a]   │
│                        │
└────────────────────────┘
```

### 4b. 选中图层 — 属性 + 曲线

```
┌─ Right Panel ────────────────┐
│                               │
│  ┌─ Properties ─────────────┐ │
│  │                           │ │
│  │  Position                 │ │
│  │  X [120]  Y [80]         │ │
│  │                           │ │
│  │  Size                     │ │
│  │  W [200]  H [80]    ◆    │ │  ← ◆ = 此属性在当前状态有覆盖
│  │  W: [Fixed ▼]  H: [Fill ▼]│ │  ← 尺寸模式: Fixed/Fill/Hug
│  │                           │ │
│  │  Transform                │ │
│  │  Rotation [0°]            │ │
│  │  Scale X [1] Y [1]       │ │
│  │                           │ │
│  │  Appearance               │ │
│  │  Opacity [100%]      ◆   │ │
│  │  Fill [■ #ffffff]         │ │
│  │  Stroke [□ none]          │ │
│  │  Corner [8]               │ │
│  │                           │ │
│  └───────────────────────────┘ │
│                               │
│  ┌─ Layout (Frame 专属) ────┐ │
│  │                           │ │
│  │  Direction:               │ │
│  │  [Free] [→ H] [↓ V]      │ │  ← 子元素排列方向
│  │                           │ │
│  │  Gap: [8]                 │ │
│  │  Padding: [12,12,12,12]   │ │
│  │                           │ │
│  │  Align Items:             │ │
│  │  [Start] [Center] [End]   │ │
│  │  [Stretch]                │ │
│  │                           │ │
│  │  Justify:                 │ │
│  │  [Start] [Center] [End]   │ │
│  │  [Space Between]          │ │
│  │                           │ │
│  │  ☑ Clip Content           │ │  ← 裁切超出内容
│  │                           │ │
│  └───────────────────────────┘ │
│                               │
│  ┌─ Transition ─────────────┐ │  ← 到达当前状态的过渡配置
│  │                           │ │
│  │  Curve: [Spring ▼]        │ │
│  │                           │ │
│  │  ┌───────────────────┐   │ │
│  │  │                   │   │ │
│  │  │    ○ ~~~~~~ ●     │   │ │  ← 弹簧动画预览
│  │  │                   │   │ │     (实时交互式预览)
│  │  └───────────────────┘   │ │
│  │                           │ │
│  │  response  [━━━●━━] 0.35  │ │  ← 滑块
│  │  damping   [━━━━●━] 0.95  │ │
│  │                           │ │
│  │  delay     [0 ms]         │ │
│  │                           │ │
│  │  ─── 元素级覆盖 ──────── │ │
│  │  ☐ 此元素使用不同曲线     │ │
│  │                           │ │
│  │  ─── 属性级覆盖 ──────── │ │
│  │  H: [Friction ▼] 0.5     │ │  ← 只有有覆盖的属性显示
│  │  opacity: [Spring] 1,0.2  │ │
│  │                           │ │
│  └───────────────────────────┘ │
│                               │
└───────────────────────────────┘
```

### 关键设计点

**◆ 覆盖标记 (Override Indicator)**
- 属性值右侧，如果该属性在当前状态有覆盖值（和默认状态不同），显示 ◆
- 点击 ◆ 可以重置该属性到默认值（移除覆盖）
- 这让你一眼看出哪些属性是"关键属性"

**弹簧预览**
- Transition 区域的核心交互
- 一个小球从左到右弹簧运动的动画预览
- 实时反映 response/damping 参数
- **拖拽滑块时预览实时更新** — 直觉调参

**属性级覆盖**
- 只有当某个属性需要和全局/元素曲线不同时才展示
- 下拉选择曲线类型 (Spring / Friction / Bezier / Linear)
- 对应 Folme 的 `config.special`

---

## 5. Patch 编辑器 (底部面板)

底部可折叠面板，默认高度 240px，可拖拽调整。

### 核心概念：一切都是 "描述目标，过去"

```
folme.to('Card/展开')           ← 具名关键帧，弹簧动画
folme.to({ scaleX: 1.05 })     ← 内联关键帧 (匿名)，弹簧动画
folme.setTo('Card/收起')        ← 具名关键帧，立即到位
folme.setTo({ x: 0, y: 0 })    ← 内联属性，立即到位
```

具名状态和内联属性**本质相同**：都是"描述目标状态，过去"。
区别只在于目标是预定义好的 (关键帧) 还是当场描述的 (内联属性)。

所以动作节点只有两种：
- **→ to** = 弹簧动画到目标
- **⇒ setTo** = 立即到位

目标可以是：具名关键帧状态 / 内联属性 / 动态值 (来自触控数据)。

### 三类节点

**触发器 (紫色)** — 触屏优先，触控为基础

| 节点 | 输出端口 | 说明 |
|------|---------|------|
| Touch | `down`, `startMove`, `move`, `up` + `x`, `y`, `offsetX`, `offsetY`, `speedX`, `speedY`, `isClick` | 原始触控事件，所有手势的原子基础 |
| Drag | `begin`, `move`, `end` + `x`, `y`, `speedX`, `speedY` | 封装: Touch + 跟手 + 惯性滚动 |
| Scroll | `offset`, `speed` | 封装: Drag + range + overscroll + absorb |
| Timer | `onTick`, `onComplete` | 定时器 |
| 变量变化 | `value` | 指定变量变化时触发 |

> **Touch 是原子**：down/startMove/move/up 是底层事件。
> Drag = Touch + 跟手逻辑 (begin→tick→end→scroll)。
> Scroll = Drag + range + overscroll + absorb。
> 可以直接用 Touch 做自定义手势，也可以用 Drag/Scroll 快速完成常见场景。

**逻辑 (灰色)** — 中间处理

| 节点 | 输入 | 输出 |
|------|------|------|
| Toggle 变量 | `pulse` | `true`, `false` (两个分支出口) |
| 条件 | `pulse` + 变量引用 | `true`, `false` |
| Delay | `pulse` | `onComplete` (延迟后) |
| Counter | `pulse` | `value` (计数值) |

**动作 (蓝色)** — 统一的 to / setTo

| 节点 | 含义 | 目标类型 |
|------|------|---------|
| **→ to** | `folme.to()` 弹簧动画 | 具名状态 or 内联属性 or 动态值 |
| **⇒ setTo** | `folme.setTo()` 立即到位 | 具名状态 or 内联属性 or 动态值 |
| **设置变量** | 改逻辑变量 | 变量 + 值 |

### → to 节点详细

to 节点的目标有三种形式：

**形式 1: 具名关键帧状态**
```
┌─── → to ──────────┐
│                    │
│  目标: 具名状态    │
│  Card / 展开       │
│                    │
│  ○ pulse           │
└────────────────────┘
```
= `card.folme.to('展开')` — 过渡到预定义的显示状态

**形式 2: 内联属性 (匿名关键帧)**
```
┌─── → to ──────────┐
│                    │
│  目标: 按钮A       │
│  scaleX: 1.05      │
│  scaleY: 1.05      │
│                    │
│  ○ pulse           │
└────────────────────┘
```
= `button.folme.to({ scaleX: 1.05, scaleY: 1.05 })` — 内联描述目标

**形式 3: 动态值 (来自连线)**
```
┌─── → to ──────────┐
│                    │
│  目标: 列表容器     │
│  y: ○ ←(从Drag连入) │
│                    │
│  ○ pulse           │
└────────────────────┘
```
= `container.folme.to('y', dragOffset)` — 目标值从 Drag 节点的 y 端口动态传入

### 示例 1: 点击 Toggle 卡片展开/收起 (具名状态)

```
代码: onClick = () => { isOpen = !isOpen; card.folme.to(isOpen ? '展开' : '收起') }
```

```
┌─ Patch Editor ───────────────────────────────────────── [▴ 折叠] ──┐
│                                                                     │
│  ┌──────────┐       ┌──────────┐       ┌──────────────┐  │ 变量(1) │
│  │ ◉ Touch  │       │ ⟲ Toggle │ true  │  → to        │  ├─────────┤
│  │          │  up   │ 变量     ├──────►│  Card / 展开 │  │ isOpen  │
│  │ target:  ├(click)│ isOpen   │       └──────────────┘  │ Bool  × │
│  │ 按钮A    ├──────►│          │       ┌──────────────┐  │ 默认    │
│  └──────────┘       │          │ false │  → to        │  │ false   │
│                     │          ├──────►│  Card / 收起 │  ├─────────┤
│                     └──────────┘       └──────────────┘  │  [+]    │
│                                                          └─────────┘
└──────────────────────────────────────────────────────────────────────┘
```

### 示例 2: 按下缩放反馈 (内联属性，直接 to)

```
代码: onDown = () => button.folme.to({ scaleX: 0.95 })
      onUp   = () => button.folme.to({ scaleX: 1 })
```

```
│  ┌──────────┐       ┌──────────────────┐                           │
│  │ ◉ Touch  │  down │  → to            │                           │
│  │          ├──────►│  按钮A           │                           │
│  │ target:  │       │  scaleX: 0.95    │                           │
│  │ 按钮A    │       │  scaleY: 0.95    │                           │
│  │          │       └──────────────────┘                           │
│  │          │  up   ┌──────────────────┐                           │
│  │          ├──────►│  → to            │                           │
│  └──────────┘       │  按钮A           │                           │
│                     │  scaleX: 1       │                           │
│                     │  scaleY: 1       │                           │
│                     └──────────────────┘                           │
```

**不需要逻辑变量**。Touch 的 down/up 直接连到 to 节点的内联属性。

### 示例 3: 拖拽跟手 (动态值 + 封装)

```
代码: drag.begin(); drag.tick(mouseX); drag.end(); drag.scroll()
```

```
│  ┌──────────────────┐                                              │
│  │ ◉ Drag           │                                              │
│  │                   │   (Drag 节点自带跟手 + 惯性逻辑)              │
│  │ target: 列表容器  │   对应 FolmeDrag: begin → tick → end → scroll │
│  │ axis: y           │                                              │
│  │ range: [0, -800]  │                                              │
│  │ overscroll: 0.5   │                                              │
│  │ absorb: [-200,-400]│                                             │
│  └──────────────────┘                                              │
```

Drag 节点**自身就是封装**，内部包含 Touch→跟手→惯性→overscroll→absorb 全套逻辑。
也可以不连到任何动作节点——它自身就会操作目标图层的位置。

但如果你只想拿数据不让它自动渲染，可以关闭内置渲染，从输出端口拿 `x`, `y`, `speedX`, `speedY` 连到其他 to 节点。

### 示例 4: 初始化时立即到位 (setTo)

```
代码: card.folme.setTo('收起')  // 无动画
```

```
│  ┌──────────┐       ┌──────────────────┐                           │
│  │ ◉ Timer  │ start │  ⇒ setTo         │                           │
│  │ delay:0  ├──────►│  Card / 收起     │                           │
│  └──────────┘       │  (无动画)        │                           │
│                     └──────────────────┘                           │
```

### 连线交互

- 从输出端口 (○) 拖出 → 贝塞尔曲线 → 连到输入端口
- 连线从左到右流动，颜色跟随端口类型
- 点击连线选中 → Delete 删除
- 拖拽空白区域 → 平移 Patch 画布

### 添加节点

- 双击空白处 → 弹出搜索菜单 → 输入节点名
- 或右键 → 选择类别 → 选择节点

### 变量面板 (PatchVarPanel — 右侧可折叠)

Patch 画布右侧 160px 宽的可折叠面板，用于管理逻辑变量。

```
展开态 (160px)                   折叠态 (28px)
┌─────────────────────┐          ┌──┐
│ 变量 (2)       [+][▶]│          │变│
├─────────────────────┤          │量│
│ [isOpen ] [Bool▾] × │          └──┘
│  默认 [false▾]       │
├─────────────────────┤
│ [tabIdx ] [Num ▾] × │
│  默认 [0       ]     │
├─────────────────────┤
│      [+ 新增]        │
└─────────────────────┘
```

**功能:**
- **新增**: 面板头部 [+] 按钮，创建新变量 (默认 boolean)
- **改名**: 直接编辑名称 input
- **改类型**: 下拉选 Bool / Num / Str，切换时自动重置默认值
- **改默认值**: 布尔为 true/false 下拉，数字和字符串为输入框
- **删除**: 每行右侧 × 按钮
- **折叠**: [▶] 收起为 28px 竖排标签，点击标签展开

**支持类型**: boolean, number, string, **enum** (具名选项列表), color
**enum 推荐**: `cardState: "collapsed" | "expanded" | "loading"` — 比 boolean 更容易扩展

> 节点上的 [+] 按钮仍保留，作为快捷创建入口（自动创建 boolean 并绑定到当前节点）。

---

## 6. 预览模式 (Preview Mode)

点击 [▶ Preview] 或按 Cmd+P 进入。

### 进入预览

```
┌──────────────────────────────────────────────┐
│                                              │
│                                              │
│              ┌─────────────┐                 │
│              │             │                 │
│              │   当前主画面  │                 │
│              │   默认状态   │                 │
│              │             │                 │
│              │  (可交互)    │                 │
│              │             │                 │
│              └─────────────┘                 │
│                                              │
│                                     [✕ 退出] │
└──────────────────────────────────────────────┘
```

- 所有面板隐藏，画布暗色背景
- 只显示主画面的当前状态，居中
- 手势交互激活：点击/拖拽/hover 触发 Patch 链路
- 弹簧动画实时执行
- 右上角 [✕] 或 Escape 退出回到编辑模式
- 底部悄悄显示当前逻辑状态 (调试用): `isOpen: false | tabIndex: 0`

---

## 7. 核心工作流

### Flow 1: 最简工作流 (Level 0 — 5 分钟)

```
1. 画几个矩形和文本（默认状态画板）
2. 点 [+ 添加状态] → 得到第二个画板（复制当前状态）
3. 在第二个画板上移动/缩放/改色
4. 系统自动发现差异 → 标记关键属性
5. Cmd+P 预览 → 点击画面 → 弹簧动画过渡
   (自动生成 Tap → Switch State 的默认 Patch)
6. 完成 ✅
```

**关键**: 用户甚至不需要碰 Patch 编辑器和曲线配置。

### Flow 2: 曲线调参 (Level 1)

```
1. 完成 Level 0 的工作
2. 右面板 Transition 区域调整 response/damping
3. 实时预览弹簧效果
4. 给某个属性 (比如 opacity) 单独设置 friction 曲线
5. 给不同元素设置不同 delay → 交错动画效果
```

### Flow 3: 复杂交互 (Level 2)

```
1. 添加逻辑变量 (isOpen, tabIndex)
2. 在 Patch 编辑器中：
   - 添加 Tap 触发器 → 连线到 Toggle(isOpen)
   - Toggle 输出 → 连线到 Condition(isOpen == true)
   - true → Switch State(展开)
   - false → Switch State(默认)
3. 添加 Hover 触发器 → 连线到 Direct To(scaleX:1.05, scaleY:1.05)
4. 预览验证完整交互链路
```

### Flow 4: 组件状态 (进阶)

```
1. 选中一个 Frame → 右键 → "设为状态组件"
2. 画布上新增一行（该组件的状态行）
3. 给组件添加自己的显示状态
4. 组件有自己的 Patch 连线（内部交互）
5. 主画面的状态切换不影响组件内部状态
```

---

## 8. Sugar 预设 (一键交互)

右键元素 → "添加交互..." → 选择预设：

| 预设 | 自动生成内容 |
|------|-------------|
| **按钮反馈** | mouseDown 缩小 0.95 + mouseUp 恢复 (Sugar) |
| **卡片展开** | 两个状态 (收起/展开) + Tap 切换 |
| **Tab 切换** | N 个状态 + tabIndex 变量 + Tap 切换 |
| **Hover 高亮** | Hover → opacity/scale 微调 |
| **拖拽排序** | Drag 交互 + 位置跟手 + absorb 吸附 |
| **滚动列表** | Drag.scroll + range + overscroll |
| **进入动画** | 从透明到不透明 + 位移，带 delay |

每个预设一键生成：**状态组 + 显示状态 + Patch 连线 + 曲线配置**。

---

## 9. 键盘快捷键

| 快捷键 | 操作 |
|--------|------|
| V | 选择工具 |
| F | 容器工具 |
| R | 矩形工具 |
| O | 椭圆工具 |
| T | 文本工具 |
| Space+拖拽 | 平移画布 |
| Cmd+P | 预览模式 |
| Cmd+Z | 撤销 |
| Cmd+Shift+Z | 重做 |
| Cmd+C / Cmd+V | 复制粘贴 |
| Cmd+D | 复制图层 |
| Delete | 删除选中 |
| Cmd+G | 编组 |
| Cmd+Shift+G | 解组 |
| Cmd+0 | 缩放到适合 |
| Cmd+1 | 缩放到 100% |
| Escape | 退出预览 / 取消选择 |
| Tab | 切换到下一个显示状态 |
| Shift+Tab | 切换到上一个显示状态 |

---

## 10. 响应式考虑

- **最小窗口宽度**: 1024px
- 左右面板可折叠 (双击边缘)
- Patch 编辑器可折叠到 40px (只显示标题栏)
- 画布始终占满剩余空间
- 面板宽度可拖拽调整

---

## 11. 关键交互细节

### 状态切换动画

在左面板点击切换状态，或点击另一个画板时：
- 当前画板边框从蓝色淡出
- 目标画板边框蓝色淡入
- 画布平滑滚动到目标画板（弹簧动画！）

### 属性修改的状态感知

在**默认状态**修改属性：
- 同步到所有没有覆盖的状态（因为其他状态继承默认值）
- 已有覆盖的状态不受影响

在**非默认状态**修改属性：
- 自动创建该属性的覆盖 (override)
- 属性旁出现 ◆ 标记
- 该属性成为"关键属性"，参与状态切换动画

### Patch 连线的自动生成

当用户创建第二个显示状态但没有任何 Patch 时：
- 自动创建一个 `Tap → Switch State` 的默认 Patch 链路
- 预览时点击画面即可在两个状态间切换
- 用户随后可以修改/替换这个默认 Patch

### 弹簧预览交互

右面板的弹簧预览区域：
- 一个小球从起点弹到终点的循环动画
- 拖拽 response 滑块 → 小球运动速度实时变化
- 拖拽 damping 滑块 → 小球震荡程度实时变化
- 点击预览区域 → 重播一次动画
- 预览和实际画板上的过渡效果完全一致
