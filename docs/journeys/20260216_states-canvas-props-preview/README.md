# Flow E: 画布图层编辑 + 属性面板 + Preview 预览

> 画像: `{states}` — 多状态设计验证
> 日期: 2026-02-16
> 步骤数: 99

## 设计任务

创建个人资料卡片，包含矩形背景 + 标题文本。设置两个状态（默认 / 状态 2），在状态 2 中覆盖 Y 位置和透明度，验证 Preview 面板的状态切换动画。

## 验证覆盖

### 画布图层编辑
| 功能 | 结果 | 备注 |
|------|------|------|
| 矩形工具 (R) | ✅ | 可创建，但画在 Artboard 外需手动修正 |
| 文本工具 (T) | ✅ | 点击即创建，默认内容 "Text" |
| 图层面板显示 | ✅ | 实时更新图层列表 |
| Undo (⌘Z) | ✅ | 撤销删除/创建操作正常 |
| 状态创建 (+) | ✅ | 自动克隆画布、生成并排 Artboard |

### 属性面板
| 功能 | 结果 | 备注 |
|------|------|------|
| X/Y 位置输入 | ✅ | 数值编辑 + Enter 确认 |
| W/H 尺寸输入 | ✅ | Tab 键可在输入框间导航 |
| 圆角输入 | ✅ | 画布实时同步 |
| 文本内容编辑 | ✅ | Textarea 支持直接输入 |
| 字号修改 | ✅ | 数值输入生效 |
| 状态覆盖 (Override) | ✅ | 橙色高亮 + "重置为基础值" 按钮 |
| 透明度修改 | ✅ | 画布实时反映 |

### Preview 预览
| 功能 | 结果 | 备注 |
|------|------|------|
| 当前状态标识 | ✅ | Header 显示 "默认"/"状态 2" |
| 状态切换联动 | ✅ | 点击状态标签 → Preview 更新 |
| 点击 Preview 循环 | ✅ | 点击 Preview 面板自动切换到下一状态 |
| Reset 按钮 | 未测 | |

## 体验审查

### ① 视觉一致性
- ✅ 属性面板标签对齐、输入框样式统一
- ✅ 覆盖属性橙色高亮清晰可辨
- ✅ 状态栏激活态视觉反馈明确
- ✅ 双 Artboard 并排对比直观

### ② 交互品味
- ✅ 属性编辑即时反映到画布
- ✅ 状态切换流畅
- ⚠️ 新图层绘制位置不直觉（缩放时难以命中 Artboard 内部）
- ⚠️ 图层删除按钮易误触

## 摩擦点

### 🔴 F-001: 新图层绘制到 Artboard 外部
- **类型**: `ux-friction`
- **严重度**: 高
- **描述**: 画布缩放较小时，用户拖拽绘制矩形非常难以命中 Artboard 内部区域。屏幕坐标到设计坐标的映射不直觉，导致图层频繁创建在 Artboard 外面。
- **重现**: 缩放 ≈ 0.41x → 按 R → 在看似 Artboard 内部区域拖拽 → 图层实际位于 Artboard 外面
- **建议**: 在绘制模式下自动将新图层 clamp 到 Artboard 范围内，或提供 snap-to-artboard 吸附功能

### 🟡 F-002: 图层删除按钮易误触
- **类型**: `ux-friction`
- **严重度**: 中
- **描述**: 图层列表中的 "×" 删除按钮紧邻图层名称。尝试点击选中图层时容易误触删除按钮。
- **重现**: 在图层面板中点击图层名称区域 → 偶尔误触到右侧的 × 按钮 → 图层被删除
- **建议**: 仅在 hover 时显示删除按钮，或增加确认对话框

### 🟡 F-003: 图层面板选中不稳定
- **类型**: `ux-friction`
- **严重度**: 中
- **描述**: 当图层在 Artboard 外部时，点击图层面板中的图层名有时无法正确选中（右侧属性面板仍显示 "未选中图层"）
- **建议**: 图层面板点击应无条件选中对应图层，不受画布视口影响
