# 旅程: 方向键与图层拖拽

## 画像
专项特性验证: 精确移动 + 画布外拖拽 + 键盘移动

## 设计目标
创建多图层 → 尝试方向键移动 → 拖拽到各位置(含画板外) → 多状态下拖拽验证 override

## 过程

### Step 01~02 — 创建矩形
画布中央绘制矩形，初始坐标 X=148, Y=358。

### Step 03 — 方向键尝试
选中矩形后按 ArrowRight + ArrowDown，坐标保持不变。
**发现: 方向键移动图层未实现。** 这是设计工具的基本功能缺失。

### Step 04 — 创建第二个图层
绘制椭圆，验证多图层场景。

### Step 05 — 拖拽到画板角落
将矩形从中央拖到画板左上角。

### Step 06 — 拖拽到画板外
将矩形拖到画板左侧外部，X=-269。
- ✅ 负坐标被允许 (无边界约束)
- ✅ 图层在画板外仍可见 (渲染不裁剪)

### Step 07 — 尝试拖回
尝试将画板外的矩形拖回中央。**失败** — 鼠标点击坐标无法准确命中
画板外的图层 DOM 元素 (viewport 坐标与图层坐标的映射复杂)。

### Step 08 — 状态2下拖拽
添加第二状态后尝试拖拽。由于 Step 07 未成功，矩形仍在画板外。

### Step 09 — 默认状态校验
切回默认状态，坐标仍为 X=-269 (与状态2一致，因为 Step 06 在默认状态下拖拽)。

## 摩擦点

1. **🔴 方向键移动图层未实现**: 设计工具标配功能。建议:
   - 方向键: 移动 1px
   - Shift+方向键: 移动 10px
   - 需在 `useKeyboard.ts` 中添加 ArrowUp/Down/Left/Right 处理

2. **🟡 画板外图层难以拖回**: 一旦图层被拖到画板可见区域外，鼠标无法再次精确命中。
   只能通过属性面板手动输入 X/Y 恢复。建议:
   - 添加"回到画板中心"的右键菜单选项
   - 或在图层面板双击时自动将视口平移到该图层位置

3. **🟡 拖拽无吸附线**: 设计工具常见的对齐吸附 (snap to grid / snap to edge) 未实现。

## 结论
⚠️ 有摩擦 — 方向键移动是必备功能，画板外图层回收是体验问题。
核心拖拽功能正常，状态感知写入 (override vs base) 机制正确。
